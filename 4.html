<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>折纸の动漫资源</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Roboto', sans-serif;
        }

        body {
            background-color: #f5f5f5;
            color: #1f1f1f;
            padding: 16px;
            max-width: 1200px;
            margin: 0 auto;
        }

        /* header：保留上下内边距，但左右对齐由 header-content 控制 */
        .header {
            margin-bottom: 20px;
            padding: 16px 0;
            background-color: #fff;
            border-radius: 16px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        /* header 内容的左右内边距（与 apps-grid 与 categories-container 保持一致） */
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 16px;
            padding: 0 12px; /* 统一对齐：12px */
        }

        .title-section h1 {
            font-weight: 500;
            font-size: clamp(1.5rem, 5vw, 1.8rem);
            margin-bottom: 8px;
        }

        .title-section p {
            color: #5f6368;
            font-size: clamp(0.9rem, 3vw, 1rem);
        }

        .search-container {
            display: flex;
            align-items: center;
            background: #f1f3f4;
            border-radius: 8px;
            padding: 8px 16px;
            width: 300px;
            transition: all 0.3s ease;
        }

        .search-container:focus-within {
            background: #e6f1fe;
            box-shadow: 0 0 0 2px #1a73e8;
        }

        .search-container input {
            border: none;
            background: transparent;
            margin-left: 8px;
            width: 100%;
            outline: none;
            font-size: 1rem;
        }

        .stats-bar {
            display: flex;
            align-items: center;
            padding: 16px 12px 0;
            border-top: 1px solid #f1f3f4;
            color: #5f6368;
            font-size: 0.9rem;
        }

        .stat-item {
            display: flex;
            align-items: center;
            margin-right: 24px;
        }

        .stat-item .material-icons {
            font-size: 1.1rem;
            margin-right: 6px;
        }

        /* ---- 分类区（关键修改） ---- */
        .categories-container {
            margin-bottom: 20px;
            /* 统一左右内边距：和 header-content / apps-grid 一致 12px */
            padding: 0 12px;
        }

        .categories-title {
            font-size: 1.2rem;
            margin-bottom: 12px;
            color: #5f6368;
            /* padding 移到 container 统一控制，避免重复偏移 */
        }

        /* 横向滚动容器：不再在这里设置左右 padding，保持与 container 对齐 */
        .categories-scroll {
            overflow-x: auto;
            padding: 8px 0; /* 只上下内边距 */
            margin-bottom: 0;
            -webkit-overflow-scrolling: touch;
        }

        /* 分类卡行：使用 flex 保持横向排列，gap 控制间距 */
        .categories-grid {
            display: flex;
            gap: 16px;
            align-items: center;
            /* 不使用额外左右 padding（container 已提供 12px） */
            padding: 0;
            min-width: max-content; /* 保持在一行可滚动 */
        }

        /* 分类卡（避免激活时改变尺寸 -> 先设置透明边框） */
        .category-folder {
            background-color: #fff;
            border-radius: 12px;
            padding: 16px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 120px;
            cursor: pointer;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            transition: all 0.18s ease;
            -webkit-tap-highlight-color: transparent;
            /* 关键：提前占位边框，激活时只变颜色，不改变布局 */
            border: 2px solid transparent;
        }

        .category-folder:hover {
            transform: translateY(-4px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }

        .category-folder.active {
            border-color: #1a73e8;
            /* 更明显的高亮：同时加阴影（可选） */
            box-shadow: 0 6px 12px rgba(26, 115, 232, 0.12);
        }

        .folder-icon {
            font-size: 2.5rem;
            margin-bottom: 8px;
            color: #1a73e8;
        }

        .folder-info {
            text-align: center;
        }

        .folder-name {
            font-size: 0.9rem;
            font-weight: 500;
            margin-bottom: 4px;
        }

        .folder-count {
            font-size: 0.8rem;
            color: #5f6368;
        }

        /* ---- 应用卡 ---- */
        .apps-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            padding: 0 12px; /* 与 header-content / categories-container 一致 */
        }

        .app-card {
            background-color: #fff;
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .app-card:hover {
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
            transform: translateY(-4px);
        }

        .app-header {
            display: flex;
            align-items: center;
            margin-bottom: 16px;
            width: 100%;
            gap: 16px;
        }

        .app-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            overflow: hidden;
            flex-shrink: 0;
        }

        .app-icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .app-info {
            flex: 1;
            min-width: 0;
        }

        .app-name {
            font-weight: 500;
            font-size: 1.1rem;
            margin-bottom: 4px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .app-version {
            color: #5f6368;
            font-size: 0.9rem;
            margin-bottom: 4px;
        }

        .app-size {
            font-weight: 500;
            color: #1a73e8;
            font-size: 0.9rem;
        }

        .app-description {
            color: #5f6368;
            font-size: 0.9rem;
            margin-bottom: 16px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .app-meta {
            display: flex;
            justify-content: space-between;
            color: #5f6368;
            font-size: 0.9rem;
            margin-top: auto;
            align-items: center;
        }

        .category {
            background: #f1f3f4;
            padding: 4px 12px;
            border-radius: 16px;
            font-size: 0.8rem;
        }

        .download-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #1a73e8;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 8px 16px;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            white-space: nowrap;
            flex-shrink: 0;
        }

        .download-btn:hover {
            background-color: #0d62c9;
        }

        .no-results {
            text-align: center;
            padding: 60px 20px;
            grid-column: 1 / -1;
            color: #5f6368;
        }

        .no-results .material-icons {
            font-size: 48px;
            margin-bottom: 16px;
            color: #dadce0;
        }

        /* 响应式 */
        @media (max-width: 768px) {
            .apps-grid {
                grid-template-columns: repeat(auto-fill, minmax(47%, 1fr));
                gap: 16px;
                padding: 0 12px;
            }

            .header-content {
                flex-direction: column;
                align-items: flex-start;
            }

            .search-container {
                width: 100%;
                margin-top: 16px;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 12px;
            }

            .apps-grid {
                grid-template-columns: 1fr;
                gap: 16px;
                padding: 0 12px;
            }
        }

        /* 去掉元素获得焦点时默认蓝色外环（移动端/点击时视觉更稳定） */
        .category-folder:focus,
        .download-btn:focus,
        .search-container:focus {
            outline: none;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <div class="title-section">
                <h1>折纸の动漫资源</h1>
                <p>订阅并更新最新的动漫资源</p>
            </div>
            <div class="search-container">
                <span class="material-icons">search</span>
                <input type="text" id="searchInput" placeholder="搜索应用名称、类别或描述...">
            </div>
        </div>
        <div class="stats-bar">
            <div class="stat-item">
                <span class="material-icons">apps</span>
                <span>8 个应用</span>
            </div>
            <div class="stat-item">
                <span class="material-icons">category</span>
                <span>4 个类别</span>
            </div>
            <div class="stat-item">
                <span class="material-icons">update</span>
                <span>最近更新: 2025年9月27日</span>
            </div>
        </div>
    </div>

    <!-- 分类卡片区域 - 横向滚动 -->
    <div class="categories-container">
        <div class="categories-title">资源分类</div>
        <!-- 给容器一个 id，JS 会使用它把选中项滚动到左侧对齐位置 -->
        <div class="categories-scroll" id="categoriesScroll">
            <div class="categories-grid" id="categoriesGrid">
                <!-- 全部资源 -->
                <div class="category-folder active" data-category="全部资源" tabindex="0">
                    <span class="material-icons folder-icon">category</span>
                    <div class="folder-info">
                        <div class="folder-name">全部资源</div>
                        <div class="folder-count">8 个应用</div>
                    </div>
                </div>

                <!-- 动漫资源 -->
                <div class="category-folder" data-category="动漫资源" tabindex="0">
                    <span class="material-icons folder-icon">movie</span>
                    <div class="folder-info">
                        <div class="folder-name">动漫资源</div>
                        <div class="folder-count">4 个应用</div>
                    </div>
                </div>

                <!-- 漫画资源 -->
                <div class="category-folder" data-category="漫画资源" tabindex="0">
                    <span class="material-icons folder-icon">book</span>
                    <div class="folder-info">
                        <div class="folder-name">漫画资源</div>
                        <div class="folder-count">4 个应用</div>
                    </div>
                </div>

                <!-- 小说资源 -->
                <div class="category-folder" data-category="小说资源" tabindex="0">
                    <span class="material-icons folder-icon">description</span>
                    <div class="folder-info">
                        <div class="folder-name">小说资源</div>
                        <div class="folder-count">2 个应用</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 应用列表区域 -->
    <div class="apps-grid" id="appsGrid">
        <!-- （应用卡片略，保持不变） -->
        <!-- 省略其余卡片内容以节省篇幅（你可以保留原始 app 卡片） -->
        <!-- 这里保留两个示例卡片以测试对齐 -->
        <div class="app-card" data-name="七猫免费小说" data-category="小说资源" data-description="纯净无广告版本 纵享小说阅读">
            <div class="app-header">
                <div class="app-icon icon-blue">
                    <img src="icons/qim.png" alt="七猫免费小说">
                </div>
                <div class="app-info">
                    <div class="app-name">七猫免费小说_纯净版</div>
                    <div class="app-version">版本 7.81</div>
                    <div class="app-size">192.54 MB</div>
                </div>
                <button class="download-btn" data-link="#">
                    <span class="material-icons">download</span>
                    下载
                </button>
            </div>
            <div class="app-description">纯净无广告版本 纵享小说阅读</div>
            <div class="app-meta">
                <div class="category">小说资源</div>
            </div>
        </div>

        <div class="app-card" data-name="得间免费小说" data-category="小说资源" data-description="纯净无广告版本 纵享小说阅读">
            <div class="app-header">
                <div class="app-icon icon-blue">
                    <img src="icons/dej.png" alt="得间免费小说">
                </div>
                <div class="app-info">
                    <div class="app-name">得间免费小说极速版_纯净版</div>
                    <div class="app-version">版本 5.6.5</div>
                    <div class="app-size">218.29 MB</div>
                </div>
                <button class="download-btn" data-link="#">
                    <span class="material-icons">download</span>
                    下载
                </button>
            </div>
            <div class="app-description">纯净无广告版本 纵享小说阅读</div>
            <div class="app-meta">
                <div class="category">小说资源</div>
            </div>
        </div>
    </div>

    <script>
        const searchInput = document.getElementById('searchInput');
        const appsGrid = document.getElementById('appsGrid');
        const appCards = document.querySelectorAll('.app-card');
        const categoryFolders = document.querySelectorAll('.category-folder');
        let currentCategory = '全部资源';

        const categoriesScroll = document.getElementById('categoriesScroll');
        const categoriesGridEl = document.getElementById('categoriesGrid');

        // 无结果提示
        const noResults = document.createElement('div');
        noResults.className = 'no-results';
        noResults.innerHTML = `
            <span class="material-icons">search_off</span>
            <h3>未找到匹配的应用</h3>
            <p>请尝试不同的搜索词或分类</p>
        `;

        // helper: 把选中项滚动到容器左侧（相对 container 的 12px 内边距）
        function scrollSelectedIntoView(el) {
            if (!categoriesScroll || !categoriesGridEl || !el) return;
            const containerPadding = 12; // 跟 CSS 中的 padding 保持一致
            // el.offsetLeft 是相对于 categoriesGrid 的左偏移
            let left = el.offsetLeft - containerPadding;
            const maxScroll = categoriesGridEl.scrollWidth - categoriesScroll.clientWidth;
            if (left < 0) left = 0;
            if (left > maxScroll) left = maxScroll;
            categoriesScroll.scrollTo({ left, behavior: 'smooth' });
        }

        // 分类切换（支持点击和触摸）
        categoryFolders.forEach(folder => {
            folder.addEventListener('click', function() {
                currentCategory = this.getAttribute('data-category');
                categoryFolders.forEach(f => f.classList.remove('active'));
                this.classList.add('active');

                // 滚动对齐选中项
                scrollSelectedIntoView(this);

                filterApps();
            });

            // 移动端触摸事件处理（保持原来逻辑）
            let touchStartX = 0;
            let touchStartY = 0;
            let isSwiping = false;

            folder.addEventListener('touchstart', function(e) {
                touchStartX = e.touches[0].clientX;
                touchStartY = e.touches[0].clientY;
                isSwiping = false;
            }, { passive: true });

            folder.addEventListener('touchmove', function(e) {
                if (Math.abs(e.touches[0].clientX - touchStartX) > 10 ||
                    Math.abs(e.touches[0].clientY - touchStartY) > 10) {
                    isSwiping = true;
                }
            }, { passive: true });

            folder.addEventListener('touchend', function() {
                if (!isSwiping) {
                    currentCategory = this.getAttribute('data-category');
                    categoryFolders.forEach(f => f.classList.remove('active'));
                    this.classList.add('active');

                    // 滚动对齐
                    scrollSelectedIntoView(this);

                    filterApps();
                }
            }, { passive: true });
        });

        // 搜索功能
        searchInput.addEventListener('input', filterApps);

        // 过滤函数
        function filterApps() {
            const searchTerm = searchInput.value.toLowerCase().trim();
            let hasVisibleItems = false;

            document.querySelectorAll('.app-card').forEach(card => {
                const appName = card.getAttribute('data-name').toLowerCase();
                const appCategory = card.getAttribute('data-category');
                const appDescription = card.getAttribute('data-description').toLowerCase();

                const categoryMatch = currentCategory === '全部资源' || appCategory === currentCategory;
                const searchMatch = searchTerm === '' ||
                                    appName.includes(searchTerm) ||
                                    appCategory.toLowerCase().includes(searchTerm) ||
                                    appDescription.includes(searchTerm);

                if (categoryMatch && searchMatch) {
                    card.style.display = 'flex';
                    hasVisibleItems = true;
                } else {
                    card.style.display = 'none';
                }
            });

            if (!hasVisibleItems) {
                if (!document.querySelector('.no-results')) {
                    appsGrid.appendChild(noResults);
                }
            } else {
                if (document.querySelector('.no-results')) {
                    appsGrid.removeChild(noResults);
                }
            }
        }

        // 下载按钮（保留原有行为）
        document.querySelectorAll('.download-btn').forEach(btn => {
            btn.addEventListener('click', function(e) {
                e.stopPropagation();
                const downloadLink = this.getAttribute('data-link');

                const originalHtml = this.innerHTML;
                this.innerHTML = '<span class="material-icons">downloading</span> 下载中...';
                this.disabled = true;

                setTimeout(() => {
                    if (downloadLink && downloadLink !== '#') {
                        window.open(downloadLink, '_blank');
                    }
                    this.innerHTML = originalHtml;
                    this.disabled = false;
                }, 800);
            }, { passive: false });

            btn.addEventListener('touchstart', function(e) {
                e.stopPropagation();
            }, { passive: false });
        });
    </script>
</body>
</html>